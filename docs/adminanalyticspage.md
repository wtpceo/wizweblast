
# âœ… ê¸°ëŠ¥ëª…ì„¸ì„œ: ê´€ë¦¬ì í†µê³„ ëŒ€ì‹œë³´ë“œ (`/admin`)

---

## ğŸ“˜ í”„ë¡ íŠ¸ì—”ë“œ ê¸°ëŠ¥ëª…ì„¸ì„œ

### 1. í™”ë©´ ë ˆì´ì•„ì›ƒ ë° ë””ìì¸ ëª…ì„¸

* **í˜ì´ì§€ ê²½ë¡œ**: `app/admin/page.tsx`

* **ì „ìš© ì»´í¬ë„ŒíŠ¸**:

  * `AdminUserStats.tsx`: ìœ ì €ë³„ í†µê³„ í…Œì´ë¸”
  * `AdminDepartmentChart.tsx`: ë¶€ì„œë³„ í†µê³„ ì‹œê°í™”
  * `AdminFilterControls.tsx`: ê²€ìƒ‰ ë° ì •ë ¬ ì»¨íŠ¸ë¡¤

* **ë ˆì´ì•„ì›ƒ êµ¬ì¡°**:

  ```
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ AdminFilterControls (ê²€ìƒ‰/ì •ë ¬ UI)           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AdminDepartmentChart (ë§‰ëŒ€ ê·¸ë˜í”„ - ë¶€ì„œë³„)  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ AdminUserStats (í…Œì´ë¸” - ìœ ì €ë³„ í†µê³„)         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ```

* **ì‚¬ìš© ShadCN ì»´í¬ë„ŒíŠ¸**:

  * `Table`, `Input`, `Select`, `Card`, `Button`

* **ì°¨íŠ¸**: `recharts` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© (ë§‰ëŒ€ ê·¸ë˜í”„)

### 2. ì‚¬ìš©ì íë¦„ ë° ìƒí˜¸ì‘ìš©

* í˜ì´ì§€ ì§„ì… ì‹œ ìë™ í†µê³„ ë¡œë”©
* ê²€ìƒ‰ ì…ë ¥ â†’ ìœ ì €ëª… ì‹¤ì‹œê°„ í•„í„°ë§
* ë¶€ì„œ ì„ íƒ â†’ íŠ¹ì • ë¶€ì„œë¡œ í†µê³„ í•„í„°ë§
* ì •ë ¬ ì„ íƒ â†’ í•  ì¼ ìˆ˜ ê¸°ì¤€ ì˜¤ë¦„/ë‚´ë¦¼ ì •ë ¬

### 3. API ì—°ë™

| í•­ëª©       | API ê²½ë¡œ                           | ì„¤ëª…               |
| -------- | -------------------------------- | ---------------- |
| í†µê³„ ì „ì²´ ì¡°íšŒ | `/api/admin/stats`               | ìœ ì €ë³„ + ë¶€ì„œë³„ í†µê³„ ë°ì´í„° |
| í•„í„°ë§/ì •ë ¬   | í”„ë¡ íŠ¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì ìš© ë˜ëŠ” ì„œë²„ ì—°ë™ (ì˜µì…˜) |                  |

### 4. ì»´í¬ë„ŒíŠ¸ ë° íŒŒì¼ êµ¬ì¡°

```
app/
â””â”€â”€ admin/
    â”œâ”€â”€ page.tsx
    â”œâ”€â”€ AdminUserStats.tsx
    â”œâ”€â”€ AdminDepartmentChart.tsx
    â””â”€â”€ AdminFilterControls.tsx
```

### 5. í…ŒìŠ¤íŠ¸ í•­ëª©

* í†µê³„ ë°ì´í„°ê°€ ì •í™•íˆ í‘œì‹œë˜ëŠ”ê°€?
* ê²€ìƒ‰ í•„í„° ì ìš© ì‹œ ì‹¤ì‹œê°„ ë°˜ì‘í•˜ëŠ”ê°€?
* ë¶€ì„œ/ì •ë ¬ ë³€ê²½ ì‹œ í…Œì´ë¸”ê³¼ ê·¸ë˜í”„ê°€ ëª¨ë‘ ë°˜ì˜ë˜ëŠ”ê°€?
* UI ë°˜ì‘ ì†ë„ ë° ì• ë‹ˆë©”ì´ì…˜(hover ë“±) í™•ì¸

---

## ğŸ› ï¸ ë°±ì—”ë“œ ê¸°ëŠ¥ëª…ì„¸ì„œ

### 1. API ì •ì˜

#### ğŸ“Œ ê´€ë¦¬ì í†µê³„ ì¡°íšŒ API

* **ê²½ë¡œ**: `app/api/admin/stats/route.ts`

* **ë©”ì„œë“œ**: GET

* **Query Parameters** (ì„ íƒ):

  * `department`: string (í•„í„°ìš©)
  * `sort`: `"asc" | "desc"` (ì •ë ¬ ê¸°ì¤€)

* **ì‘ë‹µ êµ¬ì¡°**:

```ts
type AdminStats = {
  departmentSummary: {
    department: string;
    totalTodos: number;
    completedTodos: number;
  }[];
  userSummary: {
    userId: string;
    name: string;
    department: string;
    totalTodos: number;
    completedTodos: number;
  }[];
};
```

### 2. Supabase ì—°ë™

* **í…Œì´ë¸”: `client_todos`**

  * `assigned_to` (user ID)
  * `completed`

* **í…Œì´ë¸”: `users`**

  * `id`, `name`, `department`

* **í†µê³„ ê³„ì‚° ë¡œì§**:

  * ë¶€ì„œë³„: `users` JOIN `client_todos`, GROUP BY `department`
  * ìœ ì €ë³„: `users` JOIN `client_todos`, GROUP BY `user.id`

* **Supabase ì˜ˆì‹œ ì¿¼ë¦¬ (ë¶€ì„œë³„)**:

```ts
await supabase
  .from("client_todos")
  .select("assigned_to, completed")
  .eq("department", "ë§ˆì¼€íŒ…")
  .then(...) // ì§‘ê³„ ì²˜ë¦¬
```

### 3. í…ŒìŠ¤íŠ¸ í•­ëª©

* ë°ì´í„° ì •í•©ì„± í™•ì¸: `ì´ ë“±ë¡ ìˆ˜`, `ì™„ë£Œ ìˆ˜`, `ì§„í–‰ë¥ `
* ë¶€ì„œ í•„í„°/ì •ë ¬ì´ ì •í™•íˆ ì ìš©ë˜ëŠ”ê°€?
* ìœ ì €-í•  ì¼ ì¡°ì¸ ì‹œ ë°ì´í„° ëˆ„ë½ ì—†ëŠ”ê°€?
* ì‘ë‹µ êµ¬ì¡°ê°€ í”„ë¡ íŠ¸ ìš”êµ¬ì‚¬í•­ê³¼ ì¼ì¹˜í•˜ëŠ”ê°€?

---